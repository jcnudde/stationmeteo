//---------------------------------------------------------------------------

#ifndef RecupDonnerMeteoH
#define RecupDonnerMeteoH
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <windows.h>
#include "Anemometre.h"
#include "Girouette.h"
#include "Barometre.h"
#include "CapteurJour_Nuit.h"
#include "CapteurPluie.h"
#include "Pluiviometre.h"
#include "Hygrometre.h"
#include "Solarimetre.h"
#include "Thermometre.h"
using namespace std;

typedef struct
{
    Capteur *anemometre;
    Capteur *girouette;
    Capteur *barometre;
    Capteur *thermometre;
    Capteur *hygrometre;
    Capteur *solarimetre;
    Capteur *capteur_JourNuit;
    Capteur *capteurPluie;
    Capteur *pluviometre;
} tabCapteur;
typedef struct
{
    double vitesseVent;
    double temperature;
    double pressionAtmospherique;
    double direction;
    double hummiditeRelative;
    double luminosite;
    bool jour;      //0 pour nuit et 1 pour jour
    bool pluie; //0 pour pas de pluie et 1 pour pluie
    double surfaceDePluie;
}tabDonnerCapteur;
class RecupDonnerMeteo
{
    private:
        SqlMeteoManager* sqlMeteo;
        tabCapteur capteur;
        HANDLE Thread;
        DWORD dwThreadIdArray;
        //constructeur
        RecupDonnerMeteo();
        //destructeur
        ~RecupDonnerMeteo();

        static DWORD WINAPI ThreadRecupDonnee(LPVOID params);

    public:
        //renvoie les données météo aquise à l'instant t sous forme d'une structure
        tabDonnerCapteur getDonner();
        //renvoie un seul et même pointeur
        RecupDonner* getInstance();

};
//---------------------------------------------------------------------------
#endif
